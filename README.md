# BotManag

## Описание

BotManag - это бот для управления пользователями и ссылками в Telegram. Бот позволяет добавлять пользователей в определенные регионы, удалять пользователей, а также добавлять и получать ссылки-приглашения для регионов.

## Функционал

### База данных

Бот использует базу данных PostgreSQL для хранения информации о пользователях, регионах и ссылках. Основные таблицы базы данных:

- `regions`: Хранит информацию о регионах.
- `chat_list`: Хранит список чатов, в которых бот активен.
- `invitation_links`: Хранит ссылки-приглашения для регионов.
- `users`: Хранит информацию о пользователях.
- `user_regions`: Связывает пользователей с регионами.

### Основные команды

- `/start`: Запускает бота и отображает главное меню.
- `Получить ссылки`: Получает ссылки-приглашения для пользователя.
- `Удалить пользователя`: Удаляет пользователя из базы данных и из всех чатов.
- `Добавить ссылку`: Добавляет новую ссылку-приглашение для региона.

### Дополнительные команды

- `get_chat_id`: Получает ID чата (доступно только в каналах).

## Установка и настройка

### Требования

- Python 3.7+
- PostgreSQL
- Aiogram

### Установка

1. Клонируйте репозиторий:

   ```bash
   git clone https://github.com/Denishka/BotManag.git
   cd BotManag
   ```

2. Установите зависимости:

   ```bash
   pip install -U aiogram
   pip install "pydantic>=2.4.1,<2.8"
   pip install pydantic-settings
   apt-get install build-dep python-psycopg2
   pip install psycopg2-binary
   apt install postgresql postgresql-contrib
   ```


3. Создайте базу данных PostgreSQL и настройте подключение в файле `database_manager.py`.
   и отдельно 
    ```
    sudo -i -u postgres
    psql
    ALTER USER postgres WITH PASSWORD 'postgres';
    ```

4. Создайте файл `.env` в корне проекта и добавьте туда токен вашего бота:

   ```env
   BOT_TOKEN=your_bot_token_here
   ```

5. Запустите бота:

   ```bash
   python main.py
   ```

## Использование

1. Запустите бота командой `/start`.
2. Выберите действие из главного меню:
   - `Получить ссылки`: Получите ссылки-приглашения для вашего региона.
   - `Удалить пользователя`: Удалите пользователя из базы данных и из всех чатов.
   - `Добавить ссылку`: Добавьте новую ссылку-приглашение для региона.

